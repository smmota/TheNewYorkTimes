name: "1 - [FEAT] Build & PR"

on:
  push:
    branches:
      - feature**

permissions:  
  pull-requests: write  

jobs:
  ci-dotnet-core:
    runs-on: ubuntu-latest

    steps:
      - name: Verificar c√≥digo 
        uses: actions/checkout@v2
            
      - name: Restaurar pacotes
        run: dotnet restore

      - name: Build
        run: dotnet build
  
  pr-compliance-checks:
    name: PR Compliance Checks
    runs-on: ubuntu-latest
    steps:
      - uses: mtfoley/pr-compliance-action@v0.5.0
        with:
          body-auto-close: false
          protected-branch-auto-close: false

  open-pr-to-develop:    
    name: open-pr-to-develop
    runs-on: ubuntu-latest
    needs: ci-dotnet-core 
    if: github.event.action == 'opened'
    
    steps:
      - uses: actions/first-interaction@v1      
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          pr-message: |-
            Este pull request foi aberto automaticamente pelo GitHub Actions.       